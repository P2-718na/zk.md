Concetto alla base:
quando c'è una funzione `gets` (?) non ricordo se è gets
il programma non controlla quanto byte inseriamo. Se mettiamo dentro troppi byte andiamo ad overridare roba (e in particlare il return address della funzione).

Quello che vogliamo fare sarà, indicativamente, cercare di ottenere un segfault (quando lo otteniamo siamo confident di aver overwritato il ret address della funzione)
e dopo fare la stessa cosa ma mettendo un indirizzo di memopria scelto da noi al posto del ret address.

#### Shellcode
shell-storm.org/shellcode
Praticamente se voglio eseguire una shell partendo da un buffer overflow, devo inserire codice asm fatto a mano. Gli shellcode sono robe così ma già fatte da altri

![[../FIles/Pasted image 20220426173420.png]]

Ora, la lunghezza massima del mio shellcode deve essere max lungo tanto il mio buffer. 
Metto lo shell code nel buffer. Dopo metto come return address overwritato come il primo indirizzo del mio buffer, così verrà eseguito.
(Altrimenti, se non posso fare così, il concetto è che mi serve poter piazzare del codice asm da qualche parte e far jumpare lì il programma).

endianness
![[Pasted image 20220426174332.png]]
(il big endian non lo usa nessuno)
![[Pasted image 20220426174442.png]]
`cyclic` programma per generare stringhe di lunghezza arbitraria. 

Ok in pratica vai a cazzo, quando hai segfault sai che se continui ad aggiungere (7 byte), gli ultimi 8byte li usi per controllare ret address (per )

problemi di stack alignment
![[Pasted image 20220426175529.png]]